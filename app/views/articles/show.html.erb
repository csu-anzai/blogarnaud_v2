<!-- top menu -->
<%= render 'menu-show' %>

<!-- add spacer for menu -->
<div class="top-menu-spacer"></div>

<!-- article -->
<main class="container-main">

  <!-- create card for article title -->
  <section class="card-article-show-title" id="show-article-title">
    <section class="card-article-show-title-tag">
      <!-- variable to store path to tag icon -->
      <% path = @article.tag.icon %>
     <!--  display tag icon -->
      <%= image_tag(path) %>
      <!-- display tag name -->
     <h2><%= @article.tag.name_fr %></h2>
    </section>
    <p><%= @article.date %></p>
    <h1><%= @article.title_fr %></h1>
    <%= cl_image_tag @article.photo %>
  </section>

  <!-- create card for article content -->
  <section class="card-article-show-content" id="show-article-content">
    <%= @article.content_fr %>
  </section>

  <!-- create card for article share -->
  <section class="card-article-show-share" id="show-article-share">
    <h2>Partagez cet article !</h2>
    <section class="card-article-show-share-medias">
      <!-- linkedin -->
      <%= link_to "#" do %>
        <i class="fab fa-linkedin"></i>
      <% end %>
      <!-- viadeo -->
      <%= link_to "#" do %>
        <i class="fab fa-viadeo-square"></i>
      <% end %>
      <!-- twitter -->
      <%= link_to "#" do %>
        <i class="fab fa-twitter-square"></i>
      <% end %>
      <!-- facebook -->
      <%= link_to "#" do %>
        <i class="fab fa-facebook-square"></i>
      <% end %>
       <!-- email -->
      <%= link_to "#" do %>
        <i class="fas fa-paper-plane"></i>
      <% end %>
    </section>
  </section>

  <!-- create card for article read more -->
  <section class="card-article-show-readmore" id="show-article-readmore">
    <h2>Lire aussi :</h2>

    <!-- check if @readmore has results or not -->
    <% if @readmore == [] || @readmore.count == 1 %>
      <p>Désolé, il n'y a pas d'autres articles sur le thème "<%= @article.tag.name_fr %>" pour le moment</p>
   <!--  otherwise, iterate through results -->
    <% else %>
      <% @readmore.each do |result| %>
        <!-- check if article is the same as the one being read and skip if true -->
        <% unless result.title_fr == @article.title_fr %>
          <figure class="card-article-index">
            <%= cl_image_tag result.photo, height: 300, width: 400, crop: :fill %>
            <!-- article presentation -->
            <figcaption class="card-article-index-summary">
              <!-- header for date and tag -->
              <div class="card-article-index-header">
                <%= result.date %> |
                <%= result.tag.name_fr %>
              </div>
              <!-- title and truncated content -->
              <h2><%= result.title_fr %></h2>
              <p><%= truncate(strip_tags(result.content_fr.to_s), length: 600) %></p>
              <!-- link to article -->
              <%= link_to "Lire ->", article_path(result) %>
            </figcaption>
          </figure>
        <% end %>
      <% end %>
    <% end %>
  </section>

</main>

<!-- footer -->
<%= render 'shared/footer' %>
